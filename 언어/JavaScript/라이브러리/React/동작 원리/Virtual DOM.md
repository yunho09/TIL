# Virtual DOM (가상 돔)

## 정의

* **DOM (Document Object Model)** 
	 
    * 브라우저가 HTML 코드를 해석(Parsing)하여 **메모리(RAM)** 에 생성한 **트리 구조의 객체(Object)** 이다.
    * 단순한 HTML 텍스트 복사본이 아니라 자바스크립트로 조작 가능한 **실제 '물체'** 이다. 

* **Virtual DOM (가상 돔)**
	
    * 실제 DOM을 추상화하여 메모리에 저장해 둔 **가벼운 자바스크립트 객체**이다.
    * 실제 화면에 렌더링되지 않는 **'DOM의 설계도 사본'** 이다.

> **핵심 차이 (HTML vs DOM)**
> * **HTML:** 하드디스크에 저장된 **죽어있는 텍스트** (설계도).
> * **DOM:** 브라우저가 실행될 때 메모리에 생겨난 **살아있는 객체** (모델하우스).

---

### 2. 작동 원리

React가 데이터 변경을 감지하고 화면을 업데이트하는 **3단계 과정**이다.

1.  **렌더링 (Render):**
    * 데이터(State)가 바뀌면 **새로운 Virtual DOM**을 생성한다..
2.  **비교 (Diffing):**
    * 메모리에 있던 **[이전 Virtual DOM]** 과 방금 만든 **[새로운 Virtual DOM]** 을 비교하여 **변경된 부분**만 찾아낸다. (※ 실제 DOM과 비교하는 게 아님)
3.  **패치 (Patch):**
    * 찾아낸 변경 사항만 **실제 Real DOM**에 한 번에 적용한다.

---

### 3. 비교표 (Real DOM vs Virtual DOM)

| 비교 항목     | Real DOM (실제 돔)                     | Virtual DOM (가상 돔)               |
| :-------- | :---------------------------------- | :------------------------------- |
| **쉬운 비유** | **실제 사는 집** 🏠<br>(구조를 바꾸려면 대공사 필요) | **집 설계도** 📜<br>(지우개로 지우고 고치면 됨) |
| **실체**    | 브라우저 엔진의 HTML 태그 객체                 | 메모리 상의 순수 자바스크립트 객체 (JSON)       |
| **수정 비용** | **비쌈**<br>(Reflow/Repaint 발생)       | **저렴**<br>(단순 데이터 연산)            |
| **업데이트**  | 변화가 생길 때마다 즉시 갱신                    | 변화를 모아서(Batch) **한 번에** 갱신       |
| **속도**    | 잦은 업데이트 시 느려짐                       | 잦은 업데이트에도 빠름                     |

---

### 4. 왜 쓰는가? (기존 방식의 문제점)

* **Virtual DOM이 없다면?**
    * 작은 데이터(오타 하나)를 수정해도 브라우저는 해당 영역의 HTML을 통째로 지우고 다시 그려야 한다.
    * 이때 **레이아웃 재계산(Reflow)** 비용이 커서 화면이 버벅거릴 수 있다.
* **React의 해결책**
    * 메모리(가상 돔)에서 먼저 계산을 끝내고 **최종적인 변화만 딱 한 번** 실제 브라우저에 적용하여 성능을 최적화한다.